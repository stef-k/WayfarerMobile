<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="WayfarerMobile.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:views="clr-namespace:WayfarerMobile.Views"
    xmlns:onboarding="clr-namespace:WayfarerMobile.Views.Onboarding"
    xmlns:local="clr-namespace:WayfarerMobile"
    Shell.FlyoutBehavior="Flyout"
    Title="Wayfarer">

    <!-- Flyout Header with App Name -->
    <Shell.FlyoutHeader>
        <Grid Padding="20,50,20,20">
            <!-- Gradient background (Coral to Dark Teal) -->
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#e45243" Offset="0.0" />
                    <GradientStop Color="#0f5563" Offset="1.0" />
                </LinearGradientBrush>
            </Grid.Background>

            <!-- Centered content: icon, title, subtitle -->
            <VerticalStackLayout
                Spacing="8"
                HorizontalOptions="Center"
                VerticalOptions="Center">
                <!-- App logo -->
                <Image Source="logo.png"
                       WidthRequest="92"
                       HeightRequest="92"
                       HorizontalOptions="Center" />
                <!-- App name -->
                <Label Text="Wayfarer"
                       TextColor="White"
                       FontSize="26"
                       FontAttributes="Bold"
                       HorizontalOptions="Center" />
                <!-- Subtitle -->
                <Label Text="Your personal location timeline&#10;and trip companion"
                       TextColor="White"
                       FontSize="14"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </VerticalStackLayout>
        </Grid>
    </Shell.FlyoutHeader>

    <!-- Flyout Item Template -->
    <Shell.ItemTemplate>
        <DataTemplate x:DataType="BaseShellItem">
            <Grid ColumnDefinitions="Auto,*" Padding="15,12" ColumnSpacing="15">
                <Image Grid.Column="0"
                       Source="{Binding FlyoutIcon}"
                       WidthRequest="24"
                       HeightRequest="24"
                       VerticalOptions="Center" />
                <Label Grid.Column="1"
                       Text="{Binding Title}"
                       FontSize="16"
                       VerticalOptions="Center" />
            </Grid>
        </DataTemplate>
    </Shell.ItemTemplate>

    <!-- Main Flyout Items (Main is first so it's the default) -->
    <FlyoutItem x:Name="MainFlyoutItem" Title="Map" Route="main" FlyoutIcon="map.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="MainContent"
            Title="Map"
            Route="MainPage" />
    </FlyoutItem>

    <FlyoutItem x:Name="TimelineFlyoutItem" Title="Timeline" Route="timeline" FlyoutIcon="calendar.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="TimelineContent"
            Title="Timeline"
            Route="TimelinePage" />
    </FlyoutItem>

    <FlyoutItem x:Name="TripsFlyoutItem" Title="Trips" Route="trips" FlyoutIcon="trip.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="TripsContent"
            Title="Trips"
            Route="TripsPage" />
    </FlyoutItem>

    <FlyoutItem x:Name="GroupsFlyoutItem" Title="Groups" Route="groups" FlyoutIcon="group.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="GroupsContent"
            Title="Groups"
            Route="GroupsPage" />
    </FlyoutItem>

    <FlyoutItem x:Name="SettingsFlyoutItem" Title="Settings" Route="settings" FlyoutIcon="settings.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="SettingsContent"
            Title="Settings"
            Route="SettingsPage" />
    </FlyoutItem>

    <FlyoutItem x:Name="AboutFlyoutItem" Title="About" Route="about" FlyoutIcon="info.png" FlyoutDisplayOptions="AsSingleItem">
        <ShellContent
            x:Name="AboutContent"
            Title="About"
            Route="AboutPage" />
    </FlyoutItem>

    <!-- Onboarding (hidden from flyout, only accessible via navigation) -->
    <ShellItem Route="onboarding" FlyoutItemIsVisible="False">
        <ShellContent
            x:Name="OnboardingContent"
            Shell.FlyoutBehavior="Disabled"
            Shell.TabBarIsVisible="False"
            Shell.NavBarIsVisible="False" />
    </ShellItem>

</Shell>
